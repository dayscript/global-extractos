{"version":3,"sources":["resumen-portafolio.component.ts"],"names":[],"mappings":";;;;;;;;;;;AAAA,sCAA4D;AAE5D,uDAAqD;AACrD,0CAAyD;AAGzD,iCAA+B;AAQ/B;IA2BE,oCAAoB,eAAgC,EAAU,cAA6B;QAAvE,oBAAe,GAAf,eAAe,CAAiB;QAAU,mBAAc,GAAd,cAAc,CAAe;QAxBnF,aAAQ,GAAO,KAAK,CAAC;QACrB,YAAO,GAAY,CAAC,CAAC;QACrB,aAAQ,GAAY,CAAC,CAAC;QACtB,mBAAc,GAAY,CAAC,gBAAgB,EAAE,oBAAoB,EAAE,YAAY,CAAC,CAAC;QAEjF,iBAAY,GAAU,KAAK,CAAC;QAC5B,oBAAe,GAAO;YACtB,MAAM,EAAE;gBACA,OAAO,EAAE,IAAI;gBACb,MAAM,EAAE;oBACJ,QAAQ,EAAC,EAAE;oBACX,QAAQ,EAAC,EAAE;oBACX,OAAO,EAAC,EAAE;iBAEb;aACJ;YACL,QAAQ,EACA;gBACE,OAAO,EAAC,KAAK;gBACb,YAAY,EAAE,CAAC;aAChB;SACV,CAAA;QACE,eAAU,GAAG,CAAC,OAAO,EAAE,SAAS,EAAE,OAAO,EAAC,OAAO,EAAE,MAAM,EAAE,OAAO,EAAE,OAAO,EAAE,QAAQ,EAAE,YAAY,EAAE,SAAS,EAAE,WAAW,EAAE,WAAW,CAAC,CAAC;IAErD,CAAC;IAE/F,6CAAQ,GAAR;QAAA,iBAQC;QAPC,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;QACtB,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,SAAS,CAClC,UAAA,MAAM;YAAI,KAAI,CAAC,iBAAiB,GAAG,MAAM,CAAC,IAAI,CAAC;gBACrC,KAAI,CAAC,KAAK,GAAG,MAAM,CAAC,MAAM,CAAC,CAAA;QAC7B,CAAC,CACV,CAAA;QACD,UAAU,CAAE,cAAQ,KAAI,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC,EAAC,CAAC,CAAE,CAAC;IAC5C,CAAC;IAEM,4CAAO,GAAd;QAAA,iBAmBC;QAlBC,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,IAAI,CAAC,iBAAiB,EAAE,IAAI,CAAC,KAAK,CAAC;aAC7D,SAAS,CACR,UAAA,IAAI,IAAM,KAAI,CAAC,QAAQ,GAAG,IAAI,CAAA,CAAA,CAAC,EAC/B,UAAA,KAAK,IAAI,OAAA,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,EAApB,CAAoB,EAC7B;YACI,KAAI,CAAC,MAAM,EAAE,CAAC;YACf,KAAI,CAAC,YAAY,EAAE,CAAA;YACnB,UAAU,CAAC;gBACT,CAAC,CAAC;oBACA,CAAC,CAAE,aAAa,CAAE,CAAC,UAAU,CAAC;wBAC5B,UAAU,EAAE,UAAU;wBACtB,OAAO,EAAE,KAAK;wBACd,OAAO,EAAE,KAAK;qBACf,CAAC,CAAC;gBACL,CAAC,CAAC,CAAC;YACL,CAAC,EAAC,IAAI,CAAC,CAAC;QACX,CAAC,CACF,CAAC;IACN,CAAC;IAEM,iDAAY,GAAnB;QAAA,iBAQC;QANC,IAAI,CAAC,YAAY,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC;QACpF,IAAI,CAAC,cAAc,CAAC,OAAO,CAAE,UAAC,GAAG,EAAC,KAAK;YACrC,IAAI,IAAI,GAAG,KAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,QAAQ,EAAE,CAAC;YAC/C,KAAI,CAAC,cAAc,CAAC,KAAK,CAAC,GAAG,KAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC,GAAG,EAAE,IAAI,CAAC,CAAA;QAC5E,CAAC,CAAC,CAAA;QACF,IAAI,CAAC,QAAQ,EAAE,CAAC;IAClB,CAAC;IAED,SAAS;IACF,iDAAY,GAAnB,UAAoB,CAAK;QACvB,oCAAoC;IACtC,CAAC;IAEM,iDAAY,GAAnB,UAAoB,CAAK;QACvB,iBAAiB;IACnB,CAAC;IAED,6CAAQ,GAAR;QACE,KAAK,CAAC,cAAc,EAAE,CAAC;QACvB,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC;QACjB,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;IACpB,CAAC;IACD,gDAAW,GAAX;QACE,KAAK,CAAC,cAAc,EAAE,CAAC;QACvB,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC;IACnB,CAAC;IAED,2CAAM,GAAN;QACE,IAAG,CAAC,CAAC,aAAa,CAAC,CAAC,GAAG,EAAE,IAAI,EAAE,EAAC;YAC9B,CAAC,CAAC,aAAa,CAAC,CAAC,GAAG,CAAC,QAAQ,EAAC,mBAAmB,CAAC,CAAC;YACnD,OAAO,KAAK,CAAC;SACd;aAAI;YACH,CAAC,CAAC,aAAa,CAAC,CAAC,GAAG,CAAC,QAAQ,EAAC,8BAA8B,CAAC,CAAC;YAC9D,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,aAAa,CAAC,CAAC,GAAG,EAAE,CAAA;YACnC,MAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,UAAU,GAAC,IAAI,CAAC,iBAAiB,GAAC,GAAG,GAAC,IAAI,CAAC,KAAK,CAAC,CAAC;SAC3E;IACH,CAAC;IAED,2CAAM,GAAN;QACE,IAAI,CAAC,QAAQ,CAAC,mBAAmB,GAAG,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,mBAAmB,CAAC,CAAC;QAC9E,IAAI,CAAC,QAAQ,CAAC,eAAe,GAAG,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,GAAG,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,0BAA0B,CAAC,CAAC;QAClL,IAAI,CAAC,QAAQ,CAAC,eAAe,GAAG,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,GAAG,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,GAAG,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC,CAAC;IACvJ,CAAC;IAED,mDAAc,GAAd,UAAe,KAAK;QAApB,iBAyCC;QAxCC,IAAG,CAAC,CAAC,aAAa,CAAC,CAAC,GAAG,EAAE,IAAI,EAAE,EAAC;YAC9B,CAAC,CAAC,aAAa,CAAC,CAAC,GAAG,CAAC,QAAQ,EAAC,mBAAmB,CAAC,CAAC;YACnD,OAAO,KAAK,CAAC;SACd;aAAI;YACH,CAAC,CAAC,aAAa,CAAC,CAAC,GAAG,CAAC,QAAQ,EAAC,8BAA8B,CAAC,CAAC;YAE9D,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;YAClB,IAAI,MAAM,GAAG,KAAK,CAAC,MAAM,CAAC;YAC1B,MAAM,CAAC,IAAI,GAAG,QAAQ,CAAC,oBAAoB,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,EAAE,CAAC;YACrE,+BAA+B;YAE/B,IAAI,IAAI,GAAG,IAAI,QAAQ,EAAE,CAAC;YAC1B,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,MAAM,CAAC,IAAI,CAAC,CAAC;YAEjC,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC,MAAM,CAAC,IAAI,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC,SAAS,CAC5E,UAAA,IAAI,IAAO,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAA,CAAC,CAAC,EAC9B,UAAA,KAAK,IAAM,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAA,CAAC,CAAC,EAC/B;gBACE,KAAI,CAAC,eAAe,CAAC,SAAS,CAAC,KAAI,CAAC,iBAAiB,EAAE,KAAI,CAAC,KAAK,CAAC,CAAC,SAAS,CAC1E,UAAA,IAAI;oBACF,IAAI,IAAI,GAAG,IAAI,IAAI,CAAC,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,EAAE,EAAE,IAAI,EAAE,iBAAiB,EAAC,CAAC,CAAC;oBAC/D,IAAI,GAAG,GAAG,MAAM,CAAC,GAAG,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;oBAC3C,IAAI,CAAC,GAAG,QAAQ,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC;oBACpC,CAAC,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;oBACzB,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;oBAC7B,CAAC,CAAC,IAAI,GAAG,GAAG,CAAC;oBACb,IAAI,IAAI,GAAG,IAAI,IAAI,CAAC,KAAI,CAAC,KAAK,CAAC,CAAC;oBAChC,IAAI,UAAU,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC;oBACjC,IAAI,IAAI,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;oBAC9B,CAAC,CAAC,YAAY,CAAC,UAAU,EAAE,qBAAqB,GAAC,KAAI,CAAC,UAAU,CAAC,UAAU,CAAC,GAAG,GAAG,GAAG,IAAI,GAAG,MAAM,CAAC,CAAC;oBACpG,CAAC,CAAC,KAAK,EAAE,CAAC;oBACV,MAAM,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;oBACnC,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;gBAC9B,CAAC,EACF,UAAA,KAAK,IAAK,CAAC,EACX,cAAQ,KAAI,CAAC,QAAQ,GAAI,CAAC,CAAA,CAAC,CAAC,CAC7B,CAAA;YACF,CAAC,CACD,CAAC;SACL;IACH,CAAC;IAnJU,0BAA0B;QALtC,gBAAS,CAAC;YACT,QAAQ,EAAE,QAAQ;YAClB,WAAW,EAAE,2CAA2C;YACxD,SAAS,EAAE,CAAC,kCAAe,CAAC;SAC7B,CAAC;yCA4BqC,kCAAe,EAAyB,uBAAc;OA3BhF,0BAA0B,CAoJtC;IAAD,iCAAC;CApJD,AAoJC,IAAA;AApJY,gEAA0B","file":"resumen-portafolio.component.js","sourcesContent":["import { Component,Directive, OnInit } from '@angular/core';\nimport { Observable }     from 'rxjs/Observable';\nimport { ProductsService } from './personal.service';\nimport { ActivatedRoute,Router  } from '@angular/router';\nimport { Http } from '@angular/http';\n\nimport 'rxjs/add/operator/map';\ndeclare var $: any\n\n@Component({\n  selector: 'my-app',\n  templateUrl: '/app/templates/resumen-de-portafolio.html',\n  providers: [ProductsService],\n})\nexport class ResumenPortafolioComponent implements OnInit {\n  private id_identificacion:string;\n  private fecha:string;\n  private products:any = false;\n  private showPie : number = 0;\n  private showForm : number = 0;\n  private pieChartLabels:string[] = ['Renta Fija $ %', 'Renta Variable $ %', 'Fic\\'s $ %'];\n  private pieChartData:number[];\n  private pieChartType:string = 'pie';\n  private pieChartOptions:any = {\n          legend: {\n                  display: true,\n                  labels: {\n                      fontSize:30, \n                      boxWidth:30,\n                      padding:30\n\n                  },\n              },\n          tooltips:\n                  {\n                    display:false,\n                    bodyFontSize: 1,\n                  },\n        }\n    public monthNames = [\"Enero\", \"Febrero\", \"Marzo\",\"Abril\", \"Mayo\", \"Junio\", \"Julio\", \"Agosto\", \"Septiembre\", \"Octubre\", \"Noviembre\", \"Diciembre\"];\n\n  constructor(private productsService: ProductsService, private activatedRoute:ActivatedRoute) {}\n\n  ngOnInit(){\n    this.products = false;\n    this.activatedRoute.params.subscribe(\n      params=>{ this.id_identificacion = params['id'],\n                this.fecha = params['date']\n              }\n    )\n    setTimeout( () => { this.getData(); },1 );\n  }\n\n  public getData(){\n    this.productsService.getData(this.id_identificacion, this.fecha)\n      .subscribe(\n        data => { this.products = data},\n        error => console.error(error),\n        () => {\n            this.totals();\n           this.setParamsPie()\n           setTimeout(function() {\n             $(function() {\n               $( \"#datepicker\" ).datepicker({\n                 dateFormat: \"yy-mm-dd\",\n                 minDate: '-6m',\n                 maxDate: '-1d'\n               });\n             });\n           },1000);\n        },\n      );\n  }\n\n  public setParamsPie(){\n\n    this.pieChartData = [this.products['RF'],this.products['RV'],this.products['FICS']];\n    this.pieChartLabels.forEach( (val,index) => {\n      let item = this.pieChartData[index].toString();\n      this.pieChartLabels[index] = this.pieChartLabels[index].replace('$', item)\n    })\n    this.show_pie();\n  }\n\n  // events\n  public chartClicked(e:any) {\n    //console.log(this.pieChartOptions);\n  }\n\n  public chartHovered(e:any) {\n    //console.log(e);\n  }\n\n  show_pie(){\n    event.preventDefault();\n    this.showPie = 1;\n    this.showForm = 1;\n  }\n  show_extrac(){\n    event.preventDefault();\n    this.showPie = 0;\n  }\n\n  search(){\n    if($('#datepicker').val() == ''){\n      $('#datepicker').css('border','solid 1px #ff0202');\n      return false;\n    }else{\n      $('#datepicker').css('border','1px solid rgb(198, 198, 198)');\n      this.fecha = $('#datepicker').val()\n      window.location.replace('/report/'+this.id_identificacion+'/'+this.fecha);\n    }\n  }\n\n  totals(){\n    this.products.CantidadRVBloqueado = Number(this.products.CantidadRVBloqueado);\n    this.products.TotalDisponible = Number(this.products.TotalRV) + Number(this.products.TotalRF) + Number(this.products.Efectivo) + Number(this.products.funds_investment_colective);\n    this.products.TotalPortafolio = Number(this.products.TotalDisponible) + Number(this.products.TotalLiquidez) + Number(this.products.TotalRVBloqueado);\n  }\n\n  downloadCanvas(event){\n    if($('#datepicker').val() == ''){\n      $('#datepicker').css('border','solid 1px #ff0202');\n      return false;\n    }else{\n      $('#datepicker').css('border','1px solid rgb(198, 198, 198)');\n\n      this.showForm = 0;\n      var anchor = event.target;\n      anchor.href = document.getElementsByTagName('canvas')[0].toDataURL();\n      //anchor.download = \"test.png\";\n\n      var data = new FormData();\n      data.append('file', anchor.href);\n\n      this.productsService.sendCanvas(anchor.href, this.id_identificacion).subscribe(\n        data  => { console.log(data) },\n        error => { console.log(error) },\n        ()   => { \n          this.productsService.getCanvas(this.id_identificacion, this.fecha).subscribe(\n            data => { \n              let blob = new Blob([data.blob()], { type: 'application/pdf'});\n              let url = window.URL.createObjectURL(blob);\n              let a = document.createElement(\"a\");\n              a.style.display = \"none\";\n              document.body.appendChild(a);\n              a.href = url;\n              var date = new Date(this.fecha);\n              var monthIndex = date.getMonth();\n              var year = date.getFullYear();\n              a.setAttribute(\"download\", 'Resumen-Portafolio-'+this.monthNames[monthIndex] + '-' + year + '.pdf');\n              a.click();\n              window.URL.revokeObjectURL(a.href);\n              document.body.removeChild(a);\n             },\n            error => {},\n            () => { this.showForm  = 1 } \n          )\n         }\n        );\n    }\n  }\n}\n"]}