{"version":3,"sources":["saldos-y-movimientos.component.ts"],"names":[],"mappings":"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","file":"saldos-y-movimientos.component.js","sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Observable }     from 'rxjs/Observable';\nimport { ProductsService } from './personal.service';\nimport { ActivatedRoute  } from '@angular/router';\nimport 'rxjs/add/operator/map';\nimport { Http } from '@angular/http';\ndeclare var $: any\n\n/**\n * Componente para la pagina de salfos y movimientos firma\n */\n@Component({\n  selector: 'my-app',\n  templateUrl: '/app/templates/saldos-y-movimientos.html',\n  providers: [ProductsService],\n})\nexport class SaldosMovimientosComponent implements OnInit{\n  private id_identificacion:string = '';\n  private fecha:string = ''\n  private fecha_inicio = ''\n  private fecha_final = ''\n  private renta_variable:any = false;\n  private info_movimientos:any = false;\n  private renta_fija:any = false;\n  private opl:any = false;\n  private opc:any = false;\n  private url_download: any;\n  private showPie1 : number = 0;\n  private showPie2 : number = 0;\n  private showPie3 : number = 0;\n  private showPie4 : number = 0;\n  private showForm : number = 1;\n\n  constructor(private productsService:ProductsService, private activatedRoute:ActivatedRoute, private http: Http){}\n\n  ngOnInit():void{\n    this.activatedRoute.params.subscribe(\n      params => {\n        this.id_identificacion = params['id'],\n        this.fecha = params['date']\n      }\n    );\n\n    setTimeout( () =>{ this.getData()},1);\n  }\n\n\n   getData():void{\n     setTimeout(function() {\n       $(function() {\n         $( \"#datepicker_start\" ).datepicker({\n          dateFormat: \"yy-mm-dd\",\n          minDate: '-6m',\n          maxDate: '-1d'\n         });\n       });\n       $(function() {\n         $( \"#datepicker_end\" ).datepicker({\n          dateFormat: \"yy-mm-dd\",\n          minDate: '-6m',\n          maxDate: '-1d'\n         });\n       });\n     },1000);\n\n\n     this.productsService.getRentaVariable(this.id_identificacion, this.fecha).subscribe(\n       data  => { this.renta_variable = data },\n       error => console.log(error),\n       ()    => { this.showPie1 = 1; }\n     );\n\n     this.productsService.getRetaFija(this.id_identificacion, this.fecha).subscribe(\n       data  => {this.renta_fija = data},\n       error => console.log('error: ${error}'),\n       ()    => { this.showPie2 = 1; }\n     );\n\n     this.productsService.getOperacionesPorCumplir(this.id_identificacion, this.fecha).subscribe(\n       data  => {this.opc = data},\n       error => console.log('error:${error}'),\n       ()    => { this.showPie3 = 1; }\n     );\n\n     this.productsService.getOperacionesDeLiquidez(this.id_identificacion, this.fecha).subscribe(\n       data  => {this.opl = data},\n       error => console.log('error: ${error}'),\n       ()    => { this.showPie4 = 1; }\n     );\n   }\n\n   private sumValues(values=[], field:string):any {\n     let total = 0;\n     values.forEach( (val) => {\n       if(typeof val[field] != 'undefined'){\n         total += parseFloat(val[field])\n        }\n      })\n     return total\n   }\n\n   private restValues(values=[], field:string,field2:string):any{\n     let minuendo = 0;\n     let sustranedo = 0;\n     let resultado = 0;\n\n     values.forEach( (val) => {\n       if(typeof val[field] != 'undefined'){\n         minuendo += parseFloat(val[field])\n        }\n      });\n\n      values.forEach( (val) => {\n        if(typeof val[field2] != 'undefined'){\n          sustranedo += parseFloat(val[field2])\n         }\n       })\n    return minuendo - sustranedo;\n   }\n\n  search(){\n    if($('#datepicker_start').val() == ''){\n      $('#datepicker_start').css('border','solid 1px #ff0202');\n      return false;\n    }else if($('#datepicker_end').val() == ''){\n      $('#datepicker_end').css('border','solid 1px #ff0202');\n      return false;\n    }else {\n      $('#datepicker_start').css('border','1px solid rgb(198, 198, 198)');\n      $('#datepicker_end').css('border','1px solid rgb(198, 198, 198)');\n      \n      this.fecha_inicio = $('#datepicker_start').val()\n      this.fecha_final = $('#datepicker_end').val()\n\n      var url = 'api/reporte-movimientos/'+this.id_identificacion+'/'+this.fecha_inicio+'/'+this.fecha_final\n      this.url_download = 'download/reporte-movimientos/'+this.id_identificacion+'/'+this.fecha_inicio+'/'+this.fecha_final\n      this.http.get(url)\n          .map( response => response.json() )\n          .subscribe(\n            data => { this.info_movimientos = data},\n            error => console.error(`Error: ${error}`),\n            () => {/**/}\n          );\n    }\n  }\n\n  download(){\n    if($('#datepicker_start').val() == ''){\n      $('#datepicker_start').css('border','solid 1px #ff0202');\n      return false;\n    }else if($('#datepicker_end').val() == ''){\n      $('#datepicker_end').css('border','solid 1px #ff0202');\n      return false;\n    }else {\n      $('#datepicker_start').css('border','1px solid rgb(198, 198, 198)');\n      $('#datepicker_end').css('border','1px solid rgb(198, 198, 198)');\n      \n      this.fecha_inicio = $('#datepicker_start').val()\n      this.fecha_final = $('#datepicker_end').val()\n      this.showForm = 0;\n      this.url_download = 'download/reporte-movimientos/'+this.id_identificacion+'/'+this.fecha_inicio+'/'+this.fecha_final;\n\n      this.productsService.getMovimientosFirma(this.id_identificacion, this.fecha_inicio, this.fecha_final).subscribe(\n          data => { \n            let blob = new Blob([data.blob()], { type: 'application/vnd.ms-excel'});\n            let url = window.URL.createObjectURL(blob);\n            let a = document.createElement(\"a\");\n            a.style.display = \"none\";\n            document.body.appendChild(a);\n            a.href = url;\n            var date = new Date(this.fecha);\n            var monthIndex = date.getMonth();\n            var year = date.getFullYear();\n            a.setAttribute(\"download\", 'reporte-movimientos-'+this.fecha_inicio+'_'+this.fecha_final+'.xls');\n            a.click();\n            window.URL.revokeObjectURL(a.href);\n            document.body.removeChild(a);\n           },\n          error => console.log(error),\n          () => this.showForm  = 1 \n        )\n    }\n  }\n}\n"]}