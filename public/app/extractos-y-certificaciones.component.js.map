{"version":3,"sources":["extractos-y-certificaciones.component.ts"],"names":[],"mappings":"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","file":"extractos-y-certificaciones.component.js","sourcesContent":["import { Component } from '@angular/core';\nimport { Observable }     from 'rxjs/Observable';\nimport { ProductsService } from './personal.service';\nimport { ActivatedRoute  } from '@angular/router';\nimport 'rxjs/add/operator/map';\nimport { Http } from '@angular/http';\ndeclare var $: any\n\n/**\n * Componente para la pagina de salfos y movimientos firma\n */\n@Component({\n  selector: 'my-app',\n  templateUrl: '/app/templates/extractos-y-certificaciones.html',\n  providers: [ProductsService],\n})\nexport class ExtractosCertificaciones {\n  id_identificacion:string = ''\n  fecha:string = ''\n  user_info:any;\n  fics_filter:Observable<Array<string>>;\n  today:any;\n  option_select = 'NA'\n  fecha_select_firma = 'NA'\n  fecha_select = 'NA'\n  download = 'NA'\n  fechas = []\n  info_movimientos:Observable<Array<string>>;\n  fondo:any;\n  encargo:any;\n  downloadCertificate: string;\n  downloadOperations: string;\n\n\n  constructor(\n    private productsService:ProductsService,\n    private activatedRoute:ActivatedRoute,\n    private http: Http,\n  )\n  {\n    this.activatedRoute.params.subscribe(\n      params => {\n        this.id_identificacion = params['id'],\n        this.fecha = params['date']\n      }\n    )\n    productsService.user_info\n      .subscribe(\n        data => { this.user_info = data },\n        error => console.log( 'Error: ${error}' ),\n        () => {\n            this.today = new Date()\n            productsService.verifyFile(this.user_info.codigo).subscribe(\n              response => {\n                  if(response.response){\n                    this.downloadCertificate = '/storage/documentos_ayuda/certificados_cartera/CertificadoCarteras_'+ this.user_info.codigo +'.pdf'\n                  }\n              }\n            )\n            productsService.verifyFileOperations(this.user_info.codigo).subscribe(\n              response => {\n                  if(response.response){\n                    this.downloadOperations = '/storage/documentos_ayuda/resumen_operaciones_anual/Certificado_'+ this.user_info.codigo +'.pdf'\n                  }\n              }\n            )\n\n\n        }\n      );\n\n    productsService.FicsFilter.subscribe(\n      data => { this.fics_filter = data },\n      error => console.log( 'Error: ${error}' ),\n      () => { console.log( 'FicsFilter=> ', this.fics_filter); }\n    )\n\n    for (var i = 1; i <= 6; i++) {\n      var date = new Date()\n      date.setMonth(date.getMonth()-i)\n      this.fechas.push(date);\n    }\n  }\n  download_firma(){\n     this.fecha_select_firma = $('#fecha_select_firma').val()\n     if(this.fecha_select_firma == 'NA'){\n       $('#fecha_select_firma').css('border','1px solid rgb(255, 0, 0)');\n        return;\n     }\n     window.location.replace('/download-firma-extrac/'+this.id_identificacion+'/'+this.fecha_select_firma)\n\n  }\n  download_fics(){\n    this.fecha_select = $('#fecha_select').val()\n    this.option_select = $('#option_select').val()\n    if(this.fecha_select == 'NA' || this.option_select == 'NA'){\n      $('#option_select').css('border','1px solid rgb(255, 0, 0)');\n      $('#fecha_select').css('border','1px solid rgb(255, 0, 0)');\n      return;\n    }\n    var fecha  = this.fecha_select\n    var split = this.option_select.split('|')\n    var url = '/download-fics-extrac/'+this.id_identificacion+'/'+split[0]+'/'+split[2]+'/'+fecha\n    window.location.replace(url)\n\n  }\n  download_renta(){\n    this.download = $('#download_cert').val()\n    if(this.download == 'NA'){\n      $('#download_cert').css('border','1px solid rgb(255, 0, 0)');\n      return;\n    }\n    //var url = '/download-fics-extrac/'+this.id_identificacion+'/'+split[0]+'/'+split[2]+'/'+fecha\n    var url = '/download-renta/2016'\n    window.location.replace(url)\n  }\n\n  downloadCert( link: string){\n    window.location.replace(link)\n  }\n\n  validateCodeFics(value: object, code: number) {\n    let validate;\n    Object.keys(value).forEach(function (key){\n       if (value[key].Fondo == code){\n         validate = true;\n       }\n    });\n    return validate;\n  }\n\n\n\n}\n"]}